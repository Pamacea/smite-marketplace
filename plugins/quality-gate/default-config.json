{
  "_comment": "Default Quality Gate Configuration",
  "_description": "This is the default configuration for the Smite Quality Gate system. Copy this file to .smite/quality.json and customize as needed.",
  "_documentation": "https://github.com/smite-dev/smite/tree/main/plugins/quality-gate",

  "enabled": true,
  "_enabled_note": "Master toggle for the quality gate system. When false, all validations are bypassed.",

  "logLevel": "info",
  "_logLevel_note": "Logging verbosity. Options: debug, info, warn, error",

  "maxRetries": 3,
  "_maxRetries_note": "Maximum number of retry attempts when code validation fails. Each retry provides context-aware feedback.",

  "include": [
    "**/*.ts",
    "**/*.tsx",
    "**/*.js",
    "**/*.jsx"
  ],
  "_include_note": "Glob patterns for files to include in validation. Supports * and ** wildcards.",

  "exclude": [
    "**/*.test.ts",
    "**/*.spec.ts",
    "**/node_modules/**",
    "**/dist/**",
    "**/build/**"
  ],
  "_exclude_note": "Glob patterns for files to exclude from validation. Takes precedence over include patterns.",

  "complexity": {
    "_comment": "Complexity analysis thresholds. Functions exceeding these thresholds will trigger validation issues.",

    "maxCyclomaticComplexity": 10,
    "_maxCyclomaticComplexity_note": "Maximum cyclomatic complexity per function. Measures the number of linearly independent paths through the code.",

    "maxCognitiveComplexity": 15,
    "_maxCognitiveComplexity_note": "Maximum cognitive complexity per function. Measures how difficult the code is to understand.",

    "maxNestingDepth": 4,
    "_maxNestingDepth_note": "Maximum nesting depth of control structures (if/for/while/switch).",

    "maxFunctionLength": 50,
    "_maxFunctionLength_note": "Maximum function length in lines of code.",

    "maxParameterCount": 5,
    "_maxParameterCount_note": "Maximum number of function parameters. High parameter counts indicate complex interfaces."
  },

  "semantics": {
    "_comment": "Semantic analysis configuration. Validates code consistency and conventions.",

    "enabled": true,

    "checks": [
      {
        "type": "api-contract",
        "enabled": true,
        "severity": "error",
        "_note": "Validates API contracts and type consistency across interfaces"
      },
      {
        "type": "type-consistency",
        "enabled": true,
        "severity": "error",
        "_note": "Checks for type inconsistencies and any type usage"
      },
      {
        "type": "naming",
        "enabled": false,
        "severity": "warning",
        "_note": "Validates naming conventions (camelCase, PascalCase, etc.)"
      },
      {
        "type": "duplicate-code",
        "enabled": false,
        "severity": "warning",
        "_note": "Detects duplicate code patterns"
      }
    ]
  },

  "security": {
    "_comment": "Security vulnerability scanning configuration. Uses pattern matching to detect common security issues.",

    "enabled": true,

    "rules": [
      {
        "id": "sql-injection",
        "enabled": true,
        "_note": "Detects SQL injection vulnerabilities (CRITICAL)"
      },
      {
        "id": "xss-vulnerability",
        "enabled": true,
        "_note": "Detects XSS vulnerabilities (CRITICAL)"
      },
      {
        "id": "weak-crypto",
        "enabled": true,
        "_note": "Detects weak cryptographic algorithms (ERROR)"
      },
      {
        "id": "hardcoded-secret",
        "enabled": true,
        "_note": "Detects hardcoded secrets (CRITICAL)"
      }
    ]
  },

  "tests": {
    "_comment": "Automated test execution configuration. Runs tests before allowing code changes.",

    "enabled": false,
    "_enabled_note": "Enable automatic test execution before code changes",

    "command": null,
    "_command_note": "Custom test command. Overrides automatic framework detection.",

    "framework": null,
    "_framework_note": "Test framework: jest, vitest, mocha, pytest. Auto-detected if not specified.",

    "timeoutMs": 60000,
    "_timeoutMs_note": "Maximum time to wait for test execution in milliseconds.",

    "failOnTestFailure": true,
    "_failOnTestFailure_note": "Deny code changes when tests fail."
  },

  "mcp": {
    "_comment": "MCP (Model Context Protocol) integration for automated documentation generation.",

    "enabled": false,
    "_enabled_note": "Enable MCP documentation triggers.",

    "serverPath": "./node_modules/@smite/docs-editor-mcp/dist/index.js",
    "_serverPath_note": "Path to the MCP documentation server.",

    "triggers": {
      "openAPI": {
        "_comment": "OpenAPI/Swagger specification generation.",
        "enabled": true,
        "filePatterns": [
          "**/routes/**/*.ts",
          "**/api/**/*.ts",
          "**/controllers/**/*.ts",
          "**/pages/api/**/*.ts"
        ],
        "frameworks": [
          "express",
          "nextjs"
        ]
      },

      "readme": {
        "_comment": "README.md documentation generation.",
        "enabled": true,
        "filePatterns": [
          "**/src/**/*.ts",
          "**/lib/**/*.ts",
          "**/core/**/*.ts",
          "package.json"
        ]
      },

      "jsdoc": {
        "_comment": "JSDoc comment generation.",
        "enabled": true,
        "filePatterns": [
          "**/*.ts",
          "**/*.tsx",
          "**/*.js",
          "**/*.jsx"
        ]
      }
    }
  },

  "output": {
    "_comment": "Output formatting and display options.",

    "format": "text",
    "_format_note": "Output format for validation results. Options: json, text",

    "includeCodeSnippets": true,
    "_includeCodeSnippets_note": "Include code snippets in validation output.",

    "maxSuggestions": 5,
    "_maxSuggestions_note": "Maximum number of suggestions to display per issue."
  },

  "overrides": [
    {
      "_comment": "Per-file or per-directory configuration overrides.",
      "_note": "Allows different rules for specific files or directories. More specific patterns take precedence.",

      "files": "**/core/**/*.ts",
      "_files_note": "Stricter rules for core/critical files",

      "complexity": {
        "maxCyclomaticComplexity": 5,
        "maxCognitiveComplexity": 8,
        "maxNestingDepth": 3,
        "maxFunctionLength": 30,
        "maxParameterCount": 4
      },

      "security": {
        "enabled": true,
        "rules": [
          { "id": "sql-injection", "enabled": true },
          { "id": "xss-vulnerability", "enabled": true },
          { "id": "weak-crypto", "enabled": true },
          { "id": "hardcoded-secret", "enabled": true }
        ]
      }
    },
    {
      "files": "**/*.test.ts",
      "_files_note": "More lenient rules for test files",

      "complexity": {
        "maxCyclomaticComplexity": 15,
        "maxCognitiveComplexity": 20,
        "maxNestingDepth": 5,
        "maxFunctionLength": 100,
        "maxParameterCount": 8
      },

      "semantics": {
        "enabled": false,
        "checks": []
      },

      "security": {
        "enabled": false,
        "rules": []
      }
    },
    {
      "files": "**/api/**/*.ts",
      "_files_note": "Higher security for API routes",

      "complexity": {
        "maxCyclomaticComplexity": 8,
        "maxFunctionLength": 40
      },

      "security": {
        "enabled": true,
        "rules": [
          { "id": "sql-injection", "enabled": true },
          { "id": "xss-vulnerability", "enabled": true },
          { "id": "hardcoded-secret", "enabled": true }
        ]
      }
    }
  ],
  "_overrides_note": "Remove this section if you don't need per-file overrides."
}
