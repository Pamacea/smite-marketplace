{
  "version": "1.0.0",
  "lastUpdated": "2025-01-22",
  "workflows": {
    "spec-first": {
      "id": "spec-first",
      "name": "Spec-First Development",
      "description": "Default workflow with specification generation before implementation",
      "steps": [
        {
          "id": "analyze",
          "name": "Analyze",
          "description": "Analyze codebase and dependencies using semantic search",
          "mcpTools": ["toolkit"],
          "required": true,
          "outputs": [".claude/.smite/analysis-{storyId}.md"],
          "subagent": "explore"
        },
        {
          "id": "plan",
          "name": "Plan",
          "description": "Generate technical specification with architecture and implementation plan",
          "mcpTools": [],
          "required": true,
          "outputs": [".claude/.smite/spec-{storyId}.md"]
        },
        {
          "id": "execute",
          "name": "Execute",
          "description": "Implement the specification using appropriate agent",
          "mcpTools": [],
          "required": true,
          "outputs": ["source code changes"]
        },
        {
          "id": "review",
          "name": "Review",
          "description": "Quality check and validation of implementation",
          "mcpTools": ["toolkit"],
          "required": false,
          "outputs": [".claude/.smite/review-{storyId}.md"]
        },
        {
          "id": "complete",
          "name": "Complete",
          "description": "Mark story as completed and update state",
          "mcpTools": [],
          "required": true,
          "outputs": ["updated PRD"]
        }
      ],
      "defaultOptions": {
        "mcpEnabled": true,
        "skip": []
      }
    },
    "debug": {
      "id": "debug",
      "name": "Debug Workflow",
      "description": "Systematic bug detection and resolution workflow",
      "steps": [
        {
          "id": "analyze",
          "name": "Analyze",
          "description": "Deep analysis to detect issues and patterns using toolkit",
          "mcpTools": ["toolkit"],
          "required": true,
          "outputs": [".claude/.smite/debug-analysis-{storyId}.md"],
          "subagent": "debug"
        },
        {
          "id": "plan",
          "name": "Plan",
          "description": "Create resolution strategy based on analysis",
          "mcpTools": [],
          "required": true,
          "outputs": [".claude/.smite/debug-plan-{storyId}.md"]
        },
        {
          "id": "resolve",
          "name": "Resolve",
          "description": "Apply fixes following the resolution plan",
          "mcpTools": [],
          "required": true,
          "outputs": ["fixed code"]
        },
        {
          "id": "verify",
          "name": "Verify",
          "description": "Verify fixes work correctly with testing",
          "mcpTools": ["toolkit"],
          "required": true,
          "outputs": [".claude/.smite/debug-verification-{storyId}.md"]
        },
        {
          "id": "complete",
          "name": "Complete",
          "description": "Mark issue as resolved",
          "mcpTools": [],
          "required": true,
          "outputs": ["updated PRD"]
        }
      ],
      "defaultOptions": {
        "mcpEnabled": true,
        "skip": []
      }
    },
    "refactor": {
      "id": "refactor",
      "name": "Refactor Workflow",
      "description": "Code quality improvement with validation workflow",
      "steps": [
        {
          "id": "analyze",
          "name": "Analyze",
          "description": "Detect code quality issues and anti-patterns",
          "mcpTools": ["toolkit"],
          "required": true,
          "outputs": [".claude/.smite/refactor-analysis-{storyId}.md"],
          "subagent": "refactor"
        },
        {
          "id": "plan",
          "name": "Plan",
          "description": "Prioritize issues and create refactoring plan",
          "mcpTools": [],
          "required": true,
          "outputs": [".claude/.smite/refactor-plan-{storyId}.md"]
        },
        {
          "id": "execute",
          "name": "Execute",
          "description": "Apply refactoring changes",
          "mcpTools": [],
          "required": true,
          "outputs": ["refactored code"]
        },
        {
          "id": "review",
          "name": "Review",
          "description": "Review refactored code for quality",
          "mcpTools": ["toolkit"],
          "required": true,
          "outputs": [".claude/.smite/refactor-review-{storyId}.md"]
        },
        {
          "id": "resolve",
          "name": "Resolve",
          "description": "Address any issues found in review",
          "mcpTools": [],
          "required": false,
          "outputs": ["final code changes"]
        },
        {
          "id": "verify",
          "name": "Verify",
          "description": "Final verification and testing",
          "mcpTools": [],
          "required": true,
          "outputs": [".claude/.smite/refactor-verification-{storyId}.md"]
        },
        {
          "id": "complete",
          "name": "Complete",
          "description": "Mark refactoring as complete",
          "mcpTools": [],
          "required": true,
          "outputs": ["updated PRD"]
        }
      ],
      "defaultOptions": {
        "mcpEnabled": true,
        "skip": []
      }
    },
    "feature": {
      "id": "feature",
      "name": "Feature Development",
      "description": "Complete feature implementation with research and design",
      "steps": [
        {
          "id": "analyze",
          "name": "Analyze",
          "description": "Research and analyze requirements with web search if needed",
          "mcpTools": ["toolkit", "web-search"],
          "required": true,
          "outputs": [".claude/.smite/feature-analysis-{storyId}.md"],
          "subagent": "explore"
        },
        {
          "id": "plan",
          "name": "Plan",
          "description": "Create detailed technical specification",
          "mcpTools": [],
          "required": true,
          "outputs": [".claude/.smite/spec-{storyId}.md"]
        },
        {
          "id": "execute",
          "name": "Execute",
          "description": "Implement the feature",
          "mcpTools": [],
          "required": true,
          "outputs": ["feature implementation"]
        },
        {
          "id": "review",
          "name": "Review",
          "description": "Review implementation against requirements",
          "mcpTools": ["toolkit"],
          "required": true,
          "outputs": [".claude/.smite/feature-review-{storyId}.md"]
        },
        {
          "id": "complete",
          "name": "Complete",
          "description": "Mark feature as complete",
          "mcpTools": [],
          "required": true,
          "outputs": ["updated PRD"]
        }
      ],
      "defaultOptions": {
        "mcpEnabled": true,
        "skip": []
      }
    }
  }
}
