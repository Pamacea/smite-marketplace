{
  "permissions": {
    "allow": [
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "mcp__zai-mcp-server__ui_to_artifact",
      "mcp__zread__search_doc",
      "mcp__zread__read_file",
      "mcp__zread__get_repo_structure",
      "WebSearch",
      "mcp__web-search-prime__webSearchPrime",
      "mcp__web-reader__webReader",
      "Bash(del:*)",
      "Bash(npm install:*)",
      "Bash(npm run build:*)",
      "Bash(/plugin install:*)",
      "Bash(/plugin install smite-architect@smite-marketplace)",
      "Bash(/plugin install smite-handover@smite-marketplace)",
      "Bash(/plugin:*)",
      "Bash(bash:*)",
      "Bash(ls:*)",
      "Bash(git config:*)",
      "Skill(smite-orchestrator:smite:orchestrator)",
      "Bash(find:*)",
      "Bash(findstr:*)",
      "Bash(npm run typecheck:*)",
      "Bash(while read dir)",
      "Bash(do if [ -f \"C:\\\\Users\\\\Yanis\\\\Projects\\\\smite-marketplace\\\\plugins$dir\\\\agents$dir.task.md\" ])",
      "Bash(then echo \"âœ… $dir\")",
      "Bash(else echo \"âŒ $dir \\(missing\\)\")",
      "Bash(fi:*)",
      "Bash(done:*)",
      "Bash(if exist \"plugins\\\\nul\" del \"plugins\\\\nul\")",
      "Bash(tree:*)",
      "Bash(wc:*)",
      "Bash(xargs:*)",
      "Skill(smite-explorer:smite:explorer)",
      "Skill(smite-brainstorm:smite:brainstorm)",
      "Bash(cat:*)",
      "Skill(smite-explorer:explorer)",
      "Skill(linter-sentinel:linter-sentinel)",
      "Skill(doc-maintainer:doc-maintainer)",
      "Bash(python:*)",
      "Bash(npx tsc:*)",
      "Bash(npx prettier:*)",
      "Bash(npx eslint:*)",
      "Bash(grep:*)",
      "Skill(smite-gatekeeper:smite:gatekeeper)",
      "Skill(smite-handover:smite:handover)",
      "Skill(smite-surgeon:smite:surgeon)",
      "Bash(node:*)"
    ]
  },
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "A file was just modified. Check if:\n1. The file path contains 'docs/' directory\n2. The file extension is .md\n\nIf BOTH conditions are true:\n1. Inform the user: 'ğŸ“„ Documentation modified: {filePath}'\n2. Suggest: 'Should I run Gatekeeper to validate this documentation?'\n3. If user agrees, use: Skill tool with skill='smite-gatekeeper:smite:gatekeeper' and args='--artifact={filePath}'\n\nDo NOT trigger for:\n- node_modules/\n- dist/\n- .git/\n- Files matching *.test.md or *.spec.md"
          }
        ]
      },
      {
        "matcher": "Edit|Write.*\\.(ts|tsx|js|jsx)$",
        "hooks": [
          {
            "type": "command",
            "command": "node plugins/smite-orchestrator/dist/detect-debt.js file $FILE_PATH",
            "statusMessage": "ğŸ”ª Detecting technical debt..."
          },
          {
            "type": "prompt",
            "prompt": "A source file was just modified. The detect-debt script ran. If technical debt was found in the output:\n1. Inform the user: 'ğŸ”ª Technical debt detected in {filePath}'\n2. List each issue with line number and severity from the script output\n3. Suggest: 'Run Surgeon to address {N} technical debt items?'\n4. If user agrees, use: Skill tool with skill='smite-surgeon:smite:surgeon' and args='--target={filePath} --auto-detect'\n\nOnly scan these extensions: .ts, .tsx, .js, .jsx\nIgnore: test files, node_modules/, dist/"
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "matcher": "smite-",
        "hooks": [
          {
            "type": "command",
            "command": "node plugins/smite-orchestrator/dist/agent-complete.js $AGENT_NAME",
            "statusMessage": "ğŸ¯ Updating workflow state..."
          },
          {
            "type": "prompt",
            "prompt": "A smite agent just completed and the state was updated. Read .smite/orchestrator-state.json to understand workflow state. Then:\n1. Identify which agent just completed\n2. Determine the next logical agent based on:\n   - Standard workflow: initializer â†’ explorer â†’ strategist â†’ aura â†’ constructor â†’ gatekeeper â†’ handover\n   - OR custom workflow if defined in orchestrator state\n3. Inform user: 'âœ… {agentName} completed'\n4. Suggest: 'ğŸ”„ Next agent: {nextAgent} - {reason}'\n5. Ask: 'Run {nextAgent}? [Y]es / [N]o / [S]kip'\n\nCheck .smite/suggestions/next-action.md for the generated suggestion file."
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Task.*smite-|Skill.*smite-",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "About to invoke a smite agent. Before execution:\n1. Read .smite/orchestrator-state.json\n2. Check which agents have already been called\n3. Validate workflow order:\n   - Standard: initializer â†’ explorer â†’ strategist â†’ aura â†’ constructor â†’ gatekeeper â†’ handover\n4. If workflow order is violated, warn the user:\n   'âš ï¸ Workflow warning: {agent} should run BEFORE {currentAgent}'\n5. Ask: 'Continue anyway or run recommended agents first?'\n\nSkip this validation if:\n- User explicitly requested this specific agent\n- --force flag is present\n- Workflow is custom (defined in orchestrator state)"
          }
        ]
      }
    ]
  }
}
